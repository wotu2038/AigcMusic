{% extends 'base.html' %}

{% block title %}ç”¨æˆ·ç™»å½• - AigcMusic{% endblock %}

{% block content %}
<div class="logo">
    <h1>ğŸµ AigcMusic</h1>
    <p style="color: #666; margin-top: 10px;">æ¬¢è¿å›æ¥</p>
</div>

<form method="post" action="{% url 'web:login_view' %}">
    {% csrf_token %}
    
    {% if next %}
    <input type="hidden" name="next" value="{{ next }}">
    {% endif %}
    
    <div class="form-group">
        <label for="phone">æ‰‹æœºå·</label>
        <input type="tel" id="phone" name="phone" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" required autofocus>
    </div>
    
    <div class="form-group">
        <label for="password">å¯†ç </label>
        <input type="password" id="password" name="password" placeholder="è¯·è¾“å…¥å¯†ç " required>
    </div>
    
    <button type="submit" class="btn" id="loginBtn">ç™»å½•</button>
</form>

{% block extra_js %}
<script>
document.querySelector('form').addEventListener('submit', function(e) {
    const btn = document.getElementById('loginBtn');
    const form = this;
    
    // ç¦ç”¨æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤æäº¤
    btn.disabled = true;
    btn.textContent = 'ç™»å½•ä¸­...';
    btn.style.opacity = '0.6';
    btn.style.cursor = 'not-allowed';
    
    // å¦‚æœè¡¨å•éªŒè¯å¤±è´¥ï¼Œé‡æ–°å¯ç”¨æŒ‰é’®
    setTimeout(function() {
        if (!form.checkValidity()) {
            btn.disabled = false;
            btn.textContent = 'ç™»å½•';
            btn.style.opacity = '1';
            btn.style.cursor = 'pointer';
        }
    }, 100);
});
</script>
{% endblock %}

<div class="link">
    <p>è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ<a href="{% url 'web:register_view' %}">ç«‹å³æ³¨å†Œ</a></p>
</div>
{% endblock %}

